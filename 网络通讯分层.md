# 一：应用层

## 1.1  HTTPS协议

1. HTTPS协议通过HTTP来通讯，但是用TLS/SSL来加密数据

2. HTTPS的信任是通过预先安装在计算机的各类证书来提供信任的。
3. HTTPS默认使用端口443
4. HTTPS可以防止监听和中间人攻击等手段，保障信息的安全
5. 严格来讲，HTTPS并不是一个协议，而是工作于加密协议之上（如TLS/SSL）的HTTP协议的称呼

### 1.1.1 HTTPS服务器要求

必须创建一个数字证书，并交由证书颁发机构签名以被客户端的浏览器接受。

由于浏览器一般都预装了证书颁发机构的证书，所以它们可以验证该签名

证书颁发机构可以是组织的，也可以是个人的



## 1.2 SSL/TLS协议

SSL/TLS  协议的基本思想是公钥加密法，也就是说，客户端先向服务器请求一个公钥

然后客户端用这个公钥加密信息，发给服务端。

服务端再用私钥来解密信息

但是由于客户端向服务端请求公钥的这个过程是明文，在此次连接中，信息可能会被拦截，篡改

无法保证公钥是可信的。

因此

**公钥一般是保存在证书里面的**

还有一个问题，就是要公钥来加密比较耗资源（那对话密钥加密就不耗资源啦？）

所以，一般的做法是

每一次对话，**服务端和客户端都生成对话密钥**。

在客户端和服务端通讯中，客户端用对话密钥加密信息，服务端用对话密钥解密信息。

**对话密钥本身又用公钥加密而成**

### 1.2.1 SSL/TLS通讯的详细过程

在此之前，大致说说简略过程吧

1. 客户端向服务端索要公钥
2. 客户端和服务端协商生成对话密钥
3. 客户端和服务端使用对话密钥进行通讯

前两段，被称为握手阶段

所谓详细过程，其实重点描述的，就是握手阶段了

握手阶段涉及到四次通信

#### 1.2.1.1第一次握手









 