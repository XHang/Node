# go语言笔记

# 一:简要概述

go语言是Google开发的一门用于服务器编程的,具有很好并发优势的一门编程语言

它具有以下特点

1. 语法级别的并发支持
2. 编译型语言
3. 运行速度快,占有内存低,反正比Java快就是了
4. 编写者一定是个特立独行的家伙(请忽略这一句)

# 二:入门

跟Java一样,go也需要一个编译器和运行器,然而你只需要安装一个安装包,这两者都有了,很简单不是吗

在这一章里,我们要做的事有

1. 搜索go官方网站,下载go安装包,并安装

2. 设置两个环境变量

   1. `GOROOT`  设置为go的安装路径

   2. `GO111MODULE` 设置为`on` 

      > 或许你可以设置那个啥,嗯GOPATH 把它设置为go代码编写的工作空间
      >
      > GO111MODULE和GOPATH 的配置是互斥来着,以后再讲解吧

3. 编写一个go文件,输出hello吧

   ```
   package main
   
   import "fmt"
   
   func main(){
   	 fmt.Print("你好，世界")
   }
   
   ```
   
      
   
4. 编译这个文件

   `go build xxxx`

   编译后会生成一个EXE文件,仅限Windows

5. 运行这个文件,命令行敲入文件就行了

**几个要点**

1. package是包名,将来可以用`包名.方法名/属性名`访问到对应的数据,一般来说,包名要和所属的文件夹名一样

   > 不这么做也可以,go编译器不理这事,但是你的项目经理可能不会容许这样的写法
   >
   > 另外,main包是个例外,main包表示这个包下面可以有个main方法,程序的入口就是在这里啦

2. `import "fmt"` 是导包,不过你可以忽略这个,一般的IDE会自动导,GO语言提供的工具也会帮你导

3. ```go
   func main(){
   	 fmt.Print("你好，世界")
   }
   ```

   这个是一个最简单的方法了,以后你还可以看到各种千奇百怪的方法,做好准备吧

# 三:代码结构

一般go语言的代码结构是这样的

```
root
|-------src
|----------------controller/xx.go,xxx.go
|-------bin   
bin是输出路径
```

一个go文件的代码结构是

最顶层是包

包中间的变量是包级别变量,生存周期和包一样

包里面还有函数

函数内再有变量,生存周期是函数生存周期

# 四: 基础语法

## 4.1 命名规则

必须以字母或者下划线开头,大小写严格区分,不能和关键字,预定义名字雷同

命名和访问权限挂钩

如果首字母小写,那么仅在同包内,可以访问

如果首字母大写,那么在不同包,加上`包名.`还是可以访问到

建议短命的变量,起个短平快的名字,活的长的变量,再起个丰富一点的名字

建议用驼峰命名法命名

> 建议,你可以不准守,如果你真这么做的话,小心项目经理42米长的大刀

## 4.2 声明

但凡编程语言,谈到声明,无非就是那几个

1. 声明变量 语法`var xx type`  或者是var xx 表达式

   > 第二个声明语法的变量类型,go内部将用表达式推导
   >
   > 变量仅声明,不赋值,一般默认给0值
   >
   > 数字零值:0
   >
   > 布尔零值:false
   >
   > 引用(slice,函数,chan,map....)零值:nil
   >
   > 结构体零值:就是一个空的结构体,只不过里面字段全都是零值
   >
   > 字符串零值:""

2. 声明方法  语法

   ```
   func xxxx(parameter1 type1,parameter2 type2....)(returnType1,returnType1)
   ```

   举例子

   ```
   func Method(a int,b int)(string,int){
   	return fmt.Sprintf("%d%d",a,b),a+b
   }
   ```

3. 声明常量

   ```
   const pi = 3.141594
   const (
   e = 2.71828182845904523536028747135266249775724709369995957496696763
   pi = 3.14159265358979323846264338327950288419716939937510582097494459
   )
   ```

4. 声明类型

   ```
   type Celsius float64
   ```

   类型是什么呢?再往下看

## 4.3 赋值

对一个已经定义的变量赋值很简单

`变量名=xx表达式`

如果想一步到位,用一句代码实现声明和赋值,也可以

`变量名:=表达式`

这样go内部会自动推导变量名的类型

如果变量名之前已经声明的话,上面那个表达式亦可以使用,不过就有点多余了

## 4.4 类型

在go语言中,类型的作用就是给基本数据类型换个马甲,让冰冷冷的基本数据类型,换个活法

比如说之前你想声明一个int类型变量,代表摄氏温度

那么你可以

```
var Celsius float64 //这个变量是摄氏温度
```

有了类型后,你可以给`float64`换个马甲,叫做`Celsius`

```
type Celsius float64 // 摄氏温度
```

那么你再声明摄氏温度的变量时,就可以

```
var Temperature Celsius //这个变量是摄氏温度
```

其实个人感觉纯属多此一举了,因为不看好这个语法,就介绍到这吧

## 4.3 其他需要注意的

1. go语言语句不需要分号结尾
2. go语句对于大小写括号的位置,有着谜一般的执着,你不能随便放
3. 变量一旦声明就必须使用,否则编译运行甩你一脸错误信息
4. 无异常语法,想告诉别人方法执行有误,一般方法要返回一个error类型的数据
5. 一些显而易见的常识我就不普及了,如果你还没学至少一门语言,请出门左转找C语言

# 五:基础数据类型

## 5.1 整型

go提供和很多位的整形

带符号的:`int8、int16、int32和int64`

不带符号的`uint8、uint16、uint32和uint64`

还有我们经常用的int和uint

但是这两个数据类型的位数在不同的硬件平台上有区别,可能是32或64又或者其他

>整形还有一个运算符,和其他编程语言雷同,不解释
>
>还有位操作运算符,但是感觉不太用到,忽略

## 5.2 浮点数

go提供两种浮点数

`float32`和`float64`



## 5.3 布尔类型

类型名:`bool`

只有两个值`true` `false`

## 5.4 字符串

类型名:string

go语言的字符串是可不变的

可以用内建的len(str)方法计算字符串的长度

也可以用str[index]拿到对应位置的字节

其实换一种角度,字符串就是字符数组啦

字符串可以和字符串用"+"联合起来

字符串可以用`>`  `<`   `==`  来比较

比较是将每一位字符用字符串自然編碼比较

## 5.5 常量

关注声明就行,其他太过简单,不解释

## 5.6 数组

定义数组

```
var a [3]int
var q [3]int = [3]int{1, 2, 3}
var r [3]int = [3]int{1, 2}  //第二个元素填充零值
q := [...]int{1, 2, 3}  //忽略长度,长度go会自己计算
```

数组不可变,所以用的地方不多,不解释

数组运行"="的原理是两个数组的元素一个个比较,全部相等后才认为数组相等

`!=`同理

数组作为参数传参,函数接受到的数组是原始数组的拷贝

## 5.7 切片

长度可变的数组,一般叫做`Slice`

有两个属性

1. 长度  对应切片存放的元素数量
2. 容量  你懂得

数组和切片操作都有一个方便的语法,用于取子集

假设有一个切片list

list[i:j]就是取第i个元素到第j个元素的切片作为子集

list[1:]取第i个元素到末尾元素的切片作为子集

list[:i]取首个元素到第i个元素的切片作为子集

list[:]取整个切片

切片一般不能比较,除非自己实现方法一个个比较

切片的nil值代表一个长度,容量为0的切片

所以建议,如果想判断一个切片是否为空,最好判断切片的长度

## 5.8 map





## 格式化输出的标识符

浮点数  `%g`  `%f`



## 常见方法和调用方式

# 末尾 BUG合集

